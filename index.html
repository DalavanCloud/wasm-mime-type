<!doctype html>
<html>
<head>
    <meta charset="utf8">
    <title>WebAssembly MIME type tester</title>
</head>
<body>
<div id='result'></div>
<script>
    const result = document.getElementById('result');

    fetch('test.wasm')
    .then(response => {
        var mime = response.headers.get('Content-Type');
        if (mime !== 'application/wasm')
            throw 'MIME type of test.wasm is "' + mime + '"';

        return WebAssembly.compileStreaming(response);
    })
    .then(module => {
        result.innerText += 'Success!';
    })
    .catch(error => {
        result.innerText += 'Failed with error: ' + String(error);
    });

</script>
</body>
</html>
